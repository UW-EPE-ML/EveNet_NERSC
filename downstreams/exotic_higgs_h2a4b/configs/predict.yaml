
platform:
  data_parquet_dir: "/pscratch/sd/t/tihsu/database/exotic-higgs-decay-foundation-model/evenet-ma20/"
  number_of_workers: 4
  resources_per_worker: {
    "CPU": 30,
    "GPU": 1,
  }
  batch_size: 4096
  prefetch_batches: 2
  use_gpu: true

options:
  default: options.yaml

  # For prediction Only
  prediction:
    # The directory where the prediction data is saved
    output_dir: "/pscratch/sd/t/tihsu/database/evenet-semi-leptonic-ttbar/checkpoint/test-predict-pretrain"
    # The filename of the prediction data
    filename: "prediction.pt"
    extra_save:
      - EXTRA/num_electron
      - EXTRA/num_muon
      - EXTRA/num_bjet
      - EXTRA/num_jet
      - x
      - event_weight
      - subprocess_id

  Training:
    total_epochs: 50
    epochs: 50
    #    model_checkpoint_save_path: "/global/cfs/cdirs/m2616/avencast/Event_Level_Analysis/playground/checkpoints.SPANet/TT1L"
    model_checkpoint_load_path: "/pscratch/sd/t/tihsu/database/evenet-semi-leptonic-ttbar/checkpoint-pretrain"
    pretrain_model_load_path: null

    learning_rate: &lr 0.000075
    weight_decay: &wd 0.0001
    Components:
      GlobalEmbedding:
        learning_rate: *lr
        weight_decay: *wd
      PET:
        learning_rate: *lr
        weight_decay: *wd
      ObjectEncoder:
        learning_rate: *lr
        weight_decay: *wd
      Classification:
        include: true
        warm_up: true
        learning_rate: *lr
        weight_decay: *wd
      Regression:
        include: false
        warm_up: true
        learning_rate: *lr
        weight_decay: *wd
      Assignment:
        include: false
        warm_up: true
        learning_rate: *lr
        weight_decay: *wd
      GlobalGeneration:
        include: false
      EventGeneration:
        include: false
      Segmentation:
        include: true

  Dataset:
    dataset_limit: 1.0
    #    normalization_file: "/pscratch/sd/a/avencast/Event_Level_Analysis/Pretrain_Parquet/SPANet/ttbar_semi_leptonic/train/normalization.pt"
    normalization_file: "/pscratch/sd/t/tihsu/database/evenet-semi-leptonic-ttbar/train/normalization.pt"

network:
  #  default: configs/model.yaml
  #  default: configs/model_large.yaml
  default: network.yaml
  # overwrites
  # ...

event_info:
  default: event_info_MASS.yaml

  # overwrites
  # ...

resonance:
  default: resonance.yaml

  # overwrites
  # ...
